{% extends "base.html" %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
    <div class="card bg-dark border-secondary shadow-lg p-5 text-center"
         style="max-width:600px; width:100%; border-radius:16px;">

        <h2 class="fw-bold mb-3 text-warning">
            ⏳ Płatność w trakcie potwierdzania...
        </h2>

        <p class="lead text-light">
            Status płatności jest weryfikowany.<br>
            Prosimy chwilę poczekać.
        </p>

        <div class="mt-4">
            <div class="spinner-border text-danger" role="status"></div>
        </div>

        <p class="mt-4 text-light" id="retry-info">
            Trwa sprawdzanie statusu...
        </p>

    </div>
</div>

<script>
    let attempts = 0;
    const maxAttempts = 10;  // ~30 sekund

    function checkStatus() {
        attempts++;

        if (attempts >= maxAttempts) {
            document.getElementById("retry-info").innerHTML =
                "Weryfikacja trwa dłużej niż zwykle.<br>" +
                "Jeśli płatność została wykonana, odśwież stronę ręcznie.";
            return;
        }

        window.location.reload();
    }

    setTimeout(checkStatus, 3000);
</script>
{% endblock %}
